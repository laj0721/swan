{"version":3,"file":"/web/shareGoods/signUp/js/index.js.map","sources":["/web/shareGoods/signUp/js/index.js"],"sourcesContent":["$(function() {\n  FastClick.attach(document.body);\n\n  var search = parse(),\n    $sendBtn = $('.send-btn');\n  //返回\n  $('header i').on('click', function() {\n    history.go(-1);\n  });\n  \n  function getCountDown(timer) {\n    $sendBtn.text(timer + 's后重试').addClass('disabled');\n    var setTime = setTimeout(function() {\n      if (timer === 1) {\n        $sendBtn.text('发送验证码').removeClass('disabled');\n        return;\n      }\n      timer--;\n      clearTimeout(setTime);\n      getCountDown(timer);\n    }, 1000);\n  }\n  \n  // 获取验证码\n  $sendBtn.on('click', function() {\n    if ($(this).hasClass('disabled')) {\n      return;\n    }\n\n    var phone = $('#phone').val();\n    \n    if (!phone.trim()) {\n      alert(\"请输入手机号码！\"); \n      return false; \n    } else if(!(/^1[3|4|5|7|8][0-9]\\d{4,8}$/.test(phone))){ \n      alert(\"手机号码不对！\"); \n      return false; \n    }\n   \n    $.ajax({\n      type: 'POST',\n      url: '/api/verification-codes',\n      data: { phone : phone },\n      dataType: 'json',\n      timeout: 3000,\n      success: function(data){\n        // 按钮倒计时\n        getCountDown(60);\n      },\n      error: function(data){\n        console.log(data);\n      }\n    });\n  });\n\n  // 注册\n  $('button').on('click', function(e) {\n    e.preventDefault();\n    var phone = $('#phone').val(),\n      verCode = $('#verification_code').val();\n    \n    if (!phone.trim()) {\n      alert(\"请输入手机号码！\"); \n      return false; \n    } else if (!(/^1[3|4|5|7|8][0-9]\\d{8}$/.test(phone))) { \n      alert(\"手机号码不对！\"); \n      return false; \n    } else if (!verCode.trim()) { \n      alert(\"请输入验证码！\"); \n      return false; \n    }\n\n    var param = {\n      phone: phone,\n      verification_code: verCode\n    };\n\n    $.ajax({\n      type: 'POST',\n      url: '/api/users',\n      data: param,\n      dataType: 'json',\n      timeout: 3000,\n      success: function(data){\n        if (search.isBtn === 'true') { // 点击“加入鸿链”按钮，跳转到下载APP页\n          location.href = '../signUpSucc/index.html';\n        } else { // 点击商品列表，跳转到商品详情页\n          location.href = '../../home/index.html?type=share&id=' + search.id;\n        }\n      },\n      error: function(e) {\n        //throw new Error(e);\n        if (search.isBtn === 'true') { // 点击“加入鸿链”按钮，跳转到下载APP页\n          location.href = '../signUpSucc/index.html';\n        } else { // 点击商品列表，跳转到商品详情页\n          location.href = '../../home/index.html?type=share&id=' + search.id;\n        }\n      }\n    });\n  });\n});"],"names":["$","getCountDown","timer","$sendBtn","text","addClass","setTime","setTimeout","removeClass","clearTimeout","FastClick","attach","document","body","search","parse","on","history","go","this","hasClass","phone","val","trim","test","ajax","type","url","data","dataType","timeout","success","error","console","log","alert","e","preventDefault","verCode","param","verification_code","location","href","isBtn","id"],"mappings":"AAAAA,EAAE,WAUA,QAASC,GAAaC,GACpBC,EAASC,KAAKF,EAAQ,QAAQG,SAAS,WACvC,IAAIC,GAAUC,WAAW,WACvB,MAAc,KAAVL,MACFC,GAASC,KAAK,SAASI,YAAY,aAGrCN,IACAO,aAAaH,OACbL,GAAaC,KACZ,KAnBLQ,UAAUC,OAAOC,SAASC,KAE1B,IAAIC,GAASC,QACXZ,EAAWH,EAAE,YAEfA,GAAE,YAAYgB,GAAG,QAAS,WACxBC,QAAQC,GAAG,MAiBbf,EAASa,GAAG,QAAS,WACnB,IAAIhB,EAAEmB,MAAMC,SAAS,YAArB,CAIA,GAAIC,GAAQrB,EAAE,UAAUsB,KAExB,OAAKD,GAAME,OAGC,6BAA6BC,KAAKH,OAK9CrB,GAAEyB,MACAC,KAAM,OACNC,IAAK,0BACLC,MAAQP,MAAQA,GAChBQ,SAAU,OACVC,QAAS,IACTC,QAAS,WAEP9B,EAAa,KAEf+B,MAAO,SAASJ,GACdK,QAAQC,IAAIN,OAfdO,MAAM,YACC,IAJPA,MAAM,aACC,MAuBXnC,EAAE,UAAUgB,GAAG,QAAS,SAASoB,GAC/BA,EAAEC,gBACF,IAAIhB,GAAQrB,EAAE,UAAUsB,MACtBgB,EAAUtC,EAAE,sBAAsBsB,KAEpC,KAAKD,EAAME,OAET,MADAY,OAAM,aACC,CACF,KAAM,2BAA2BX,KAAKH,GAE3C,MADAc,OAAM,YACC,CACF,KAAKG,EAAQf,OAElB,MADAY,OAAM,YACC,CAGT,IAAII,IACFlB,MAAOA,EACPmB,kBAAmBF,EAGrBtC,GAAEyB,MACAC,KAAM,OACNC,IAAK,aACLC,KAAMW,EACNV,SAAU,OACVC,QAAS,IACTC,QAAS,WAELU,SAASC,KADU,SAAjB5B,EAAO6B,MACO,2BAEA,uCAAyC7B,EAAO8B,IAGpEZ,MAAO,WAGHS,SAASC,KADU,SAAjB5B,EAAO6B,MACO,2BAEA,uCAAyC7B,EAAO8B"}